#!/bin/bash
set -e

# Obter o usu치rio atual que est치 removendo o pacote
USER=$(logname)

# Configurar o XDG_RUNTIME_DIR para o usu치rio
XDG_RUNTIME_DIR="/run/user/$(id -u $USER)"
export XDG_RUNTIME_DIR

# Executar os comandos no contexto do usu치rio
su - "$USER" -c "XDG_RUNTIME_DIR=$XDG_RUNTIME_DIR systemctl --user stop md-tracker-search-provider.service || true"
su - "$USER" -c "XDG_RUNTIME_DIR=$XDG_RUNTIME_DIR systemctl --user disable md-tracker-search-provider.service || true"
su - "$USER" -c "XDG_RUNTIME_DIR=$XDG_RUNTIME_DIR systemctl --user daemon-reload"
